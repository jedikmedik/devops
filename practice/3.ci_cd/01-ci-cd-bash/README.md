 #### Запуск деплоя с использованием bash

В данной практике мы рассмотрим вариант деплоя приложения с помощью bash скрипта. 

#### Подготовка

Создаем скрипт деплоя [deploy_app.sh](https://gitlab.slurm.io/devops/devops/raw/master/practice/3.ci_cd/01-ci-cd-bash/deploy_app.sh) на сервере `sandbox` в корне проекта xpaste.

Просмотр справки по доступным ключам:

#### Практика

* Деплой приложения

Для запуска деплоя необходимо запустить скрипт deploy_app.sh с ключом deploy:

```bash
bash deploy_app.sh --deploy
```
В результате выполнения этой команды код будет скопирован на сервер, в БД будут выполнены необходимые миграции, сгенерированы статические файлы и установлены необходимые зависимости.

+ Вывод справки

    ```bash
    bash deploy_app.sh --help
    ```
        
    + `build`       - локальная сборка проекта. 
    + `clean`       - удаление артефактов, созданных в результате локальной сборки.
    + `deploy`      - копирование проекта на удаленный сервер, сборка проекта, выполнение миграций БД и перезапуск служб nginx и puma.
    + `rollback`    - откат приложения на предыдущую версию и удаление текущей версии.

* Проверяем доступность xpaste

В браузере открываем http://XPASTE_IP

Где XPASTE_IP это IP-адрес сервера xpaste

* Анализ результатов

Подключитесь к серверу xpaste по ssh:

```bash
ssh XPASTE_IP
```

Посмотрите структуру каталогов:

```bash
ll /srv/www/xpaste/
```

